<html>

    <head>
        <meta charset="utf-8">
        <title>podizanje stupnja</title>
         <link rel="stylesheet" type="text/css" href="../vendor/jsxgraph.css"/>
         <script src="../vendor/jsxgraphcore.js"></script>
         <script src="../noUISlider/nouislider.min.js"></script>
         <link rel="stylesheet" type="text/css" href="../noUISlider/nouislider.css"/>
         <script src="../lib/jquery-3.3.1.min.js"></script>
         <script src="../lib/bootstrap.min.js"></script>
         <link rel="stylesheet" href="../lib/bootstrap.min.css">
         <link rel="stylesheet" href="../lib/fontawesome/css/all.css">
         <link href="../vendor/simple-sidebar.css" rel="stylesheet">
         <link rel="stylesheet" type="text/css" href="../vendor/page.css">
         <style>
          .btn:focus, .btn:active, label.btn {
          outline: none !important;
          box-shadow: none !important;
          -webkit-box-shadow: none !important;
          }
          .btn.btn-custom-sm {
            border-radius: 0;
          }
          .JXGinfobox {
            border-style: solid;
            border-width: 1px;
            background-color: yellow;
            border-color: #ffccff;
            padding-left:2px;
            padding-right: 2px;
          }
         </style>
    </head>

    <body>
       
      <div id="container" style="height:700px;">

        <div id="wrapper">

      
        <div id="sidebar-wrapper">
          <ul class="sidebar-nav">
           <li class="sidebar-brand" style="color:#e2fbf5;"><b>B&eacute;zierove krivulje</b></li>
          <li><a href="bernsteinovi_polinomi.html">Bernsteinovi polinomi</a></li>
          <li><a href="deCasteljau.html">De Casteljaunov algoritam</a></li>
          <li><a href="partBezier.html">Subdivizija B&eacute;zierove krivulje</a></li>
          <li><a href="derivacijaBezier.html">Derivacija B&eacute;zierove krivulje</a></li>
          <li><a href="#" style="color:yellow;">Podizanje stupnja</a></li>
          <li><a href="G2neprekidnost.html">Geometrijska neprekidnost</a></li>
          <li><a href="G2gamma.html">G<sup>2</sup> neprekidnost</a></li>
          <li><a href="konike.html">Konike</a></li>
          <li><a href="kruznica.html">Kružnica</a></li>
          <li><a href="racionalni_deCasteljau.html">Racionalne B&eacute;zierove krivulje</a></li>
           <li class="sidebar-brand" style="color:#e2fbf5;"><b>B-splajnovi</b></li>
           <li><a href="bspline_basis.html">Bazne funkcije</a></li>
           <li><a href="lokalni_deboor.html">Lokalni De Boorov algoritam</a></li>
           <li><a href="globalni_deboor.html">Globalni De Boorov algoritam</a></li>
           <li><a href="kubicna_Bsplajn_krivulja.html">Kubična B-splajn krivulja</a></li>
           <li><a href="periodicna_Bsplajn_krivulja.html">Zatvorena B-splajn krivulja</a></li>
          </ul>
        </div>

        <div class="row">

          <div class="col">
            <a style="position:absolute; left:15px; padding:5px 5px;" href="#menu-toggle" class="btn btn-secondary btn-sm btn-custom-sm shadow-none" id="menu-toggle"><span class="fas fa-th-list fa-2x" style="color:white;"></span></a>
       
        <div id="content" style="width:800px;">
           <div id="box" class="jxgbox" style="width:800px; height:600px; margin-bottom:30px; z-index:100;"></div>
           <div class="alert alert-secondary" role="alert" style="width:540px; margin-top:50px; margin-left:120px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
            <div style="margin-top:25px;"><span class="badge badge-primary">stupanj</span>&nbsp; <div id="deg-slider-elem" style="width:70%; display: inline-block;"></div>
            <button type="button" class="btn btn-sm btn-danger" id="refresh" style="position:relative; left:45px; top:0px; border-radius:7px;"><span class="fas fa-sync-alt" style="color:white;"></span></button>
            </div>
            <div class="btn-group btn-group-toggle" data-toggle="buttons" style="margin-top:20px;">
              <span><span class="badge badge-primary">prikaz poligona</span>&nbsp;&nbsp;</span> <label class="btn btn-sm btn-secondary active">
                <input type="radio" value="0" name="poligon_view" id="option1" autocomplete="off" checked> svi
              </label>
              <label class="btn btn-sm btn-secondary">
                <input type="radio" value="2" name="poligon_view" id="option2" autocomplete="off"> zadnja dva
              </label>
              <label class="btn btn-sm btn-secondary">
                <input type="radio" value="1" name="poligon_view" id="option3" autocomplete="off"> zadnji
              </label>
            </div>
           </div>
        </div>

      </div>      

      <div class="col">

        <a style="position:absolute;top:0px; right:15px; margin:0; padding:5px 5px;" class="btn btn-secondary btn-sm btn-custom-sm shadow-none" data-toggle="collapse" href="#pomoc" aria-expanded="false" aria-controls="collapseExample"><span class="far fa-image fa-2x" style="color:white;"></span></a>

      <div class="collapse" id="pomoc" style="width:700; position: absolute; top: 50; right:30; z-index:100;">
       <div class="card card-body">
       <p style="text-align:center;">
        <a style="position:absolute; top:0px; left:0px;" href="slike/podizanje_stupnja_bezier.pdf" target="_blank"><button type="button" class="btn btn-danger btn-sm btn-custom-sm" style="vertical-align:top;"><span class="fas fa-file-pdf" style="color:white;"></span></button></a>
        <img src="slike/podizanje_stupnja_bezier.png" width="650"></p>
      </div>
     </div> 


        <div class="alert alert-secondary" role="alert" style="width:540px; margin-top:80px; margin-left:80px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
            <p><b>Podizanje stupnja B&eacute;zierove krivulje</b><p>
            <hr>  
            <p><span class="badge badge-secondary">kontrolne točke</span>&nbsp; <img src="slike/podizanjeBezier1.png">&nbsp; od B&eacute;zierove krivulje&nbsp; <img src="slike/podizanjeBezier0.png" style="margin-bottom:3px;"></p>
            <p><span class="badge badge-secondary">nove kontrolne točke</span></p> 
            <p><img src="slike/podizanjeBezier2.png"></p>
            <p>Novi kontrolni poligon leži unutar konveksne ljuske starog kontrolnog poligona.</p>
            <hr style="margin-bottom:0px;"><hr style="margin-top:4px;">
            <p><b>Iterativno podizanje stupnja B&eacute;zierove krivulje</b><p>
            <hr>
            <p><img src="slike/podizanjeBezier3.png"></p>
            <p><img src="slike/podizanjeBezier4.png"></p>
            <p><img src="slike/podizanjeBezier5.png" style="margin-bottom:3px;"> je kontrolni poligon s vrhovima <img src="slike/podizanjeBezier6.png" style="margin-bottom:5px;"></p>
            <p><span class="badge badge-secondary">konvergencija je spora</span>&nbsp;&nbsp; <img src="slike/podizanjeBezier7.png" style="margin-bottom:-5px;"></p>
          </div>
      </div>

      </div>
    </div>
        
      </div>

      <script language="JavaScript">
            JXG.Options.infobox.strokeColor = '#0033cc';
            deg_slider_elem = document.getElementById('deg-slider-elem');
            var DEG = 4;
            var all_poligon = 0; // 0 - svi vidljivi, 1 - zadnji vidljiv, 2 - zadnja dva vidljiva

            noUiSlider.create(deg_slider_elem, {start: [4], connect: 'lower', tooltips:[{to: value => parseInt(value)}], step: 1, 
                                         range: {'min': 3, 'max': 13}});
            
            var control = [];
            var boje = ['#5c6bc0','#26a69a','#99cc66','#be9b7b','#0099ff','#a80fff','#008744','#0057e7','#4f5b66','#ffa700'];
                        
            var aplet = JXG.JSXGraph.initBoard('box', {boundingbox: [-2, 9, 11, -0.5], grid:true,  
                                                       showCopyright:false, keepaspectratio: false,
                                                       showNavigation:false,axis:true,
                                                       zoom:{wheel:false},
                                                       pan:{enabled:false}});
            
            aplet.highlightInfobox = function (x, y, el) {
                aplet.infobox.setText(el.name);
            };

            control[0] = aplet.create('point', [-1.2,0.6], {'name':'<span>b<sub>0</sub></span>', size:4, color:'#009900', 
              label:{visible:false}});
            control[1] = aplet.create('point', [-0.4,7.7], {'name':'<span">b<sub>1</sub></span>', size:4, color:'#009900', 
              label:{visible:false}});
            control[2] = aplet.create('point', [9.3,8.3], {'name':'<span>b<sub>2</sub></span>', size:4, color:'#009900', 
              label:{visible:false}});
            control[3] = aplet.create('point', [10.5,0.3], {'name':'<span>b<sub>3</sub></span>', size:4, color:'#009900', 
              label:{visible:false}});

            var poligon = [control[1], control[2]];
            var duzine = [];
            
            for (let n = 3; n < 13; n++) {

              let ind = (n - 1) * n / 2 - n;
              poligon.push(
                  aplet.create('point', [function(){return (1 - 1/(n+1)) * poligon[ind].X() + 1/(n+1) * control[0].X();},
                                         function(){return (1 - 1/(n+1)) * poligon[ind].Y() + 1/(n+1) * control[0].Y();}],
                                        {'name':`<span>b<sub>1</sub><sup>(${n-2})</sup></span>`, face:'square', 
                                         color:boje[n-3], size:2, label:{visible:false}, 
                                         visible: function(){return ((DEG == n+1) || ((DEG == n+2) && (all_poligon == 2)) || 
                                                                    ((DEG > n) && (all_poligon == 0)));}})
                  );

              duzine.push(
                  aplet.create('segment', [control[0],poligon[poligon.length-1]], 
                        {strokeColor:boje[n-3], dash:1, strokeWidth:1, 
                          visible: function(){return (DEG == n + 1);}, 
                          shadow: true, highlight:true})
                  );

              for (let i = 2; i < n; i++) {
                poligon.push(
                  aplet.create('point', [function(){return (1 - i/(n+1)) * poligon[ind+i-1].X() + i/(n+1) * poligon[ind+i-2].X();},
                                         function(){return (1 - i/(n+1)) * poligon[ind+i-1].Y() + i/(n+1) * poligon[ind+i-2].Y();}],
                                        {'name':`<span>b<sub>${i}</sub><sup>(${n-2})</sup></span>`, face:'square', 
                                         color:boje[n-3], size:2, label:{visible:false}, 
                                         visible: function(){return ((DEG == n+1) || ((DEG == n+2) && (all_poligon == 2)) || 
                                                                    ((DEG > n) && (all_poligon == 0)));}})
                  );
                duzine.push(
                  aplet.create('segment', [poligon[poligon.length-2],poligon[poligon.length-1]], 
                        {strokeColor:boje[n-3], dash:1, strokeWidth:1, 
                          highlight: function(){return (DEG == n + 1);},
                          visible: function(){return ((DEG == n+1) || ((DEG == n+2) && (all_poligon == 2)) || 
                                                                    ((DEG > n) && (all_poligon == 0)));}, 
                          shadow: function(){return (DEG == n + 1);}})
                  );
              }

              poligon.push(
                  aplet.create('point', [function(){return (1 - n/(n+1)) * control[3].X() + n/(n+1) * poligon[ind+n-2].X();},
                                         function(){return (1 - n/(n+1)) * control[3].Y() + n/(n+1) * poligon[ind+n-2].Y();}],
                                        {'name':`<span>b<sub>${n}</sub><sup>(${n-2})</sup></span>`, face:'square', 
                                         color:boje[n-3], size:2, label:{visible:false}, 
                                         //visible: function(){return ((DEG == n+1) || ((DEG > n) && all_poligon));}}
                                         visible: function(){return ((DEG == n+1) || ((DEG == n+2) && (all_poligon == 2)) || 
                                                                    ((DEG > n) && (all_poligon == 0)));}}
                                         )
                  );
              
              duzine.push(
                  aplet.create('segment', [poligon[poligon.length-2],poligon[poligon.length-1]], 
                    {strokeColor:boje[n-3], dash:1, strokeWidth:1, 
                      highlight: function(){return (DEG == n + 1);}, 
                      visible: function(){return ((DEG == n+1) || ((DEG == n+2) && (all_poligon == 2)) || 
                                                                    ((DEG > n) && (all_poligon == 0)));},
                      shadow: function(){return (DEG == n + 1);}})
                  );

              duzine.push(
                  aplet.create('segment', [poligon[poligon.length-1],control[3]], 
                        {strokeColor:boje[n-3], dash:1, strokeWidth:1,
                          visible: function(){return (DEG == n + 1);}, 
                          shadow: true, highlight:true})
                  );
            }

            var segment1 = aplet.create('segment', [control[0],control[1]], {strokeColor:'#999966',dash:1,strokeWidth:1});
            var segment2 = aplet.create('segment', [control[1],control[2]], {strokeColor:'#999966',dash:1,strokeWidth:1});
            var segment3 = aplet.create('segment', [control[2],control[3]], {strokeColor:'#999966',dash:1,strokeWidth:1});

            segment1.setAttribute({fixed:true,highlight:false});
            segment2.setAttribute({fixed:true,highlight:false});
            segment3.setAttribute({fixed:true,highlight:false});

            var krivulja = aplet.create('curve', JXG.Math.Numerics.bezier(control), {strokeWidth:3,strokeColor:'red'});
            
            $("#menu-toggle").click(function(event) {
              event.preventDefault();
              $("#wrapper").toggleClass("toggled");
            });

            deg_slider_elem.noUiSlider.on('update', function() {
              DEG = Number(deg_slider_elem.noUiSlider.get());
              aplet.update();
            });

            $('#refresh').on('click', function(event) {
              event.preventDefault();
              control[0].moveTo([-1.2,0.6]);
              control[1].moveTo([-0.4,7.7]);
              control[2].moveTo([9.3,8.3]);
              control[3].moveTo([10.5,0.3]);
              DEG = 4;
              deg_slider_elem.noUiSlider.set(4);
              $("#option1").prop("checked", true).trigger("click");
              aplet.update();
            });

            $('input[name=poligon_view]').on('change', function() {
              all_poligon = parseInt($(this).val());
              aplet.update();
            });
        </script>

    </body>

</html>