<html>

    <head>
        <meta charset="utf-8">
        <title>racionalni de Casteljau</title>
         <link rel="stylesheet" type="text/css" href="../vendor/jsxgraph.css"/>
         <script src="../vendor/jsxgraphcore.js"></script>
         <script src="../noUISlider/nouislider.min.js"></script>
         <link rel="stylesheet" type="text/css" href="../noUISlider/nouislider.css"/>
         <script src="../lib/jquery-3.3.1.min.js"></script>
         <script src="../lib/bootstrap.min.js"></script>
         <link rel="stylesheet" href="../lib/bootstrap.min.css">
         <link rel="stylesheet" href="../lib/fontawesome/css/all.css">
         <link href="../vendor/simple-sidebar.css" rel="stylesheet">
         <link rel="stylesheet" type="text/css" href="../vendor/page.css">
         <style>
          .btn:focus, .btn:active, label.btn {
          outline: none !important;
          box-shadow: none !important;
          -webkit-box-shadow: none !important;
          }
          .btn.btn-custom-sm {
            border-radius: 0;
          }
          [data-toggle="collapse"].collapsed .fa:before { content: "\f056"; }
          [data-toggle="collapse"] .fa:before { content: "\f055"; }
         </style>
    </head>

    <body>
       
      <div id="container" style="height:700px;">

        <div id="wrapper">

      
        <div id="sidebar-wrapper">
          <ul class="sidebar-nav">
           <li class="sidebar-brand" style="color:#e2fbf5;"><b>B&eacute;zierove krivulje</b></li>
          <li><a href="bernsteinovi_polinomi.html">Bernsteinovi polinomi</a></li>
          <li><a href="deCasteljau.html">De Casteljaunov algoritam</a></li>
          <li><a href="partBezier.html">Subdivizija B&eacute;zierove krivulje</a></li>
          <li><a href="derivacijaBezier.html">Derivacija B&eacute;zierove krivulje</a></li>
          <li><a href="podizanje_stupnja_Bezier.html">Podizanje stupnja</a></li>
          <li><a href="G2neprekidnost.html">Geometrijska neprekidnost</a></li>
          <li><a href="G2gamma.html">G<sup>2</sup> neprekidnost</a></li>
          <li><a href="konike.html">Konike</a></li>
          <li><a href="kruznica.html">Kružnica</a></li>
          <li><a href="#" style="color:yellow;">Racionalne B&eacute;zierove krivulje</a></li>
           <li class="sidebar-brand" style="color:#e2fbf5;"><b>B-splajnovi</b></li>
           <li><a href="bspline_basis.html">Bazne funkcije</a></li>
           <li><a href="lokalni_deboor.html">Lokalni De Boorov algoritam</a></li>
           <li><a href="globalni_deboor.html">Globalni De Boorov algoritam</a></li>
           <li><a href="kubicna_Bsplajn_krivulja.html">Kubična B-splajn krivulja</a></li>
           <li><a href="periodicna_Bsplajn_krivulja.html">Zatvorena B-splajn krivulja</a></li>
          </ul>
        </div>

        <div class="row">

          <div class="col">
            <a style="position:absolute; left:15px; padding:5px 5px;" href="#menu-toggle" class="btn btn-secondary btn-sm btn-custom-sm shadow-none" id="menu-toggle"><span class="fas fa-th-list fa-2x" style="color:white;"></span></a>
       
        <div id="content" style="width:800px;">
           <div id="box" class="jxgbox" style="width:800px; height:550px; margin-bottom:20px; z-index:100;"></div>
           <div class="alert alert-secondary" role="alert" style="width:540px; margin-top:35px; margin-left:120px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
            <div style="margin-top:15px;"><i>t</i>&nbsp; <div id="t-slider-elem" style="width:80%; display: inline-block;"></div>
            <button type="button" class="btn btn-sm btn-danger" id="refresh" style="position:relative; left:45px; top:0px; border-radius:7px;"><span class="fas fa-sync-alt" style="color:white;"></span></button></div>
            <div style="margin-top:25px;"><i>w<sub>0</sub></i>&nbsp; <div id="w0-slider-elem" style="width:80%; display: inline-block;"></div></div>
            <div style="margin-top:25px;"><i>w<sub>1</sub></i>&nbsp; <div id="w1-slider-elem" style="width:80%; display: inline-block;"></div></div>
            <div style="margin-top:25px;"><i>w<sub>2</sub></i>&nbsp; <div id="w2-slider-elem" style="width:80%; display: inline-block;"></div></div>
            <div style="margin-top:25px;"><i>w<sub>3</sub></i>&nbsp; <div id="w3-slider-elem" style="width:80%; display: inline-block;"></div></div>
           </div>
        </div>

      </div>      

      <div class="col">

        <a style="position:absolute;top:0px; right:15px; margin:0; padding:5px 5px;" class="btn btn-secondary btn-sm btn-custom-sm shadow-none" data-toggle="collapse" href="#pomoc" aria-expanded="false" aria-controls="collapseExample"><span class="far fa-image fa-2x" style="color:white;"></span></a>

      <div class="collapse" id="pomoc" style="width:650; position: absolute; top: 50; right:30; z-index:100;">
       <div class="card card-body">
       <p style="text-align:center;">
        <a style="position:absolute; top:0px; left:0px;" href="slike/racionalni_deCasteljau.pdf" target="_blank"><button type="button" class="btn btn-danger btn-sm btn-custom-sm" style="vertical-align:top;"><span class="fas fa-file-pdf" style="color:white;"></span></button></a>
        <img src="slike/racionalni_deCasteljau.png" width="400"></p>
        <div class="accordion" id="accordionExample">
          
          <div class="card" style="border:hidden;">
          <div class="card-header" id="headingSix" style="background-color: white; padding:0;">
            <h2 class="mb-0">
              <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
               <i class="fa"></i> Racionalna B&eacute;zierova krivulja
              </button>
            </h2>
          </div>
          <div id="collapseSix" class="collapse" aria-labelledby="headingSix" data-parent="#accordionExample">
            <div class="card-body">
              <ul style="margin:0px; padding:0px;">
                <li style="margin-bottom:2pt;">Racionalna B&eacute;zierova krivulja stupnja <img src="slike/n.png"> u <img src="slike/R3.png" style="vertical-align: baseline;"> je projekcija B&eacute;zierove krivulje stupnja <img src="slike/n.png"> u <img src="slike/R4.png" style="vertical-align: baseline;"> na hiperravninu <img src="slike/w=1.png" style="vertical-align: baseline;">. Točke u <img src="slike/R4.png" style="vertical-align: baseline;"> su oblika <img src="slike/xyzw.png">.</li>
                <li style="margin-bottom:2pt;">Točki <img src="slike/xtR3.png" style="vertical-align: sub;"> odgovara točka <img src="slike/xt1R4.png" style="vertical-align: sub;">.</li>
                <li style="margin-bottom:2pt;">Točka <img src="slike/x1.png" style="vertical-align: sub;"> je projekcija točke <img src="slike/wxw.png" style="vertical-align: sub;"> koja leži na neracionalnoj 4D B&eacute;zierovoj krivulji stupnja <img src="slike/n.png">.</li>
                <li style="margin-bottom:3pt;"><img src="slike/wt_formula.png"></li>
                <li style="margin-bottom:2pt;">Točke <img src="slike/biR3.png" style="vertical-align: text-bottom;"> određuju kontrolni poligon koji je projekcija kontrolnog poligona pripadne neracionalne 4D B&eacute;zierove krivulje određenog točkama <img src="slike/wibiwi.png">.</li>
                <li style="margin-bottom:2pt;">Ako je <img src="slike/wi_equal.png" style="vertical-align: text-bottom;">, tada dobivamo neracionalnu B&eacute;zierovu krivulju.</li>
                <li>Ako su sve težine <img src="slike/wi.png" style="vertical-align: text-bottom;"> pozitivne, tada nema singulariteta i krivulja je sadržana u konveksnoj ljusci svojeg kontrolnog poligona.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="card" style="border:hidden;">
          <div class="card-header" id="headingOne" style="background-color: white; padding:0;">
            <h2 class="mb-0">
              <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
               <i class="fa"></i> Standardna forma
              </button>
            </h2>
          </div>
          <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
            <div class="card-body">
              <ul style="margin:0px; padding:0px;">
                <li style="margin-bottom:2pt;">Za <img src="slike/konike5.png"> težine <img src="slike/ratDeCast8.png"> daju istu krivulju kao i početne težine <img src="slike/ratDeCast9.png" style="vertical-align: text-bottom;">.</li>
                <li style="margin-bottom:4pt;">Graf krivulje <img src="slike/ratDeCast11.png"> se ne mijenja pri zamjeni težina <img src="slike/ratDeCast10.png" style="margin-bottom:4px; margin-right:2px;"> za neki <img src="slike/konike7.png" style="margin-bottom:0px; margin-right:1px;">.</li>
                <li>Ako uzmemo <img src="slike/ratDeCast12.png"> (uz uvjet <img src="slike/ratDeCast13.png">), nakon dijeljenja s <img src="slike/ratDeCast14.png" style="vertical-align: sub;"> dolazimo do standardne forme racionalne B&eacute;zierove krivulje u kojoj je <img src="slike/ratDeCast15.png" style="vertical-align: text-bottom;"></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="card" style="border:hidden;">
          <div class="card-header" id="headingTwo" style="background-color: white; padding:0;">
            <h2 class="mb-0">
              <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
               <i class="fa"></i> Podizanje stupnja
              </button>
            </h2>
          </div>
          <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
            <div class="card-body">
              <ul style="margin:0px; padding:0px;">
                <li style="margin-bottom:2pt;">Podignemo stupanj pripadne neracionalne B&eacute;zierove krivulje s kontrolnim točkama <img src="slike/wibiwi.png"> i nakon toga dobivene točke projiciramo na hiperravninu <img src="slike/w=1.png" style="vertical-align: baseline;">.<br> <img src="slike/ratDeCast16.png" style="margin-left: 60px; margin-bottom:10px;"></li>
                <li><span class="badge badge-secondary">postupak 1</span> Uzmemo racionalnu B&eacute;zierovu krivulju u standardnoj formi i podignemo njezin stupanj.<br> <span class="badge badge-secondary">postupak 2</span> Uzmemo racionalnu B&eacute;zierovu krivulju u standardnoj formi, najprije ju reparametriziramo, nakon toga joj podignemo stupanj i dobivenu krivulju dovedemo u standardnu formu.<br> Opisana dva postupka daju dva različita kontrolna poligona i dva različita skupa standardiziranih težina koji opisuju istu racionalnu krivulju.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="card" style="border:hidden;">
          <div class="card-header" id="headingThree" style="background-color: white; padding:0;">
            <h2 class="mb-0">
              <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
               <i class="fa"></i> Derivacija
              </button>
            </h2>
          </div>
          <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
            <div class="card-body">
              <p><img src="slike/ratDeCast17.png"></p>
            </div>
          </div>
        </div>
        
        </div>
       </div>
      </div>

      <div class="modal fade" id="eqnModal" tabindex="-1" role="dialog" aria-labelledby="eqnModalLabel" aria-hidden="true" data-backdrop="static">
       <div class="modal-dialog modal-lg" role="document">
         <div class="modal-content">
           <div class="modal-header">
             <h5 class="modal-title" id="example2ModalLabel">Ravninska racionalna B&eacute;zierova krivulja</h5>
             <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
             </button>
           </div>
           <div class="modal-body">
             <p style="text-align: center;"><img src="slike/ratBezier.png" style="width:100%;"></p>
           </div>
           <div class="modal-footer">
             <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
           </div>
         </div>
        </div>
      </div>

      <div class="alert alert-secondary" role="alert" style="width:540px; margin-top:50px; margin-left:80px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
            <p><b>Racionalni De Casteljaunov algoritam</b><p>
            <hr>
            <p><span class="badge badge-secondary">Racionalna B&eacute;zierova krivulja</span><br> <img src="slike/ratDeCast1.png" style="margin-top:10px;margin-left:50px;"></p>
            <div style="position: absolute; right:20px; top: 60px; z-index:10;">
              <a type="button" class="btn btn-secondary btn-sm shadow-none" data-toggle="modal" data-target="#eqnModal"><span class="fas fa-dice-d6 fa-2x" style="color:white;"></span></a>
            </div>
            <hr>
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
              <span class="badge badge-primary" style="display: inline-block; height:20px; padding-bottom:2px;margin-top:6px;">neracionalna krivulja</span>&nbsp;&nbsp; 
              <label class="btn btn-sm btn-secondary">
                <input type="radio" value="0" name="nerac_view" id="nerac0" autocomplete="off" checked> hide
              </label>
              <label class="btn btn-sm btn-secondary active">
                <input type="radio" value="1" name="nerac_view" id="nerac1" autocomplete="off"> show
              </label>
            </div>
            <hr>
            <p><img src="slike/ratDeCast2.png"></p>
            <p><img src="slike/ratDeCast3.png"></p>
            <p><img src="slike/deCasteljau4.png"></p>
            <hr>
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
              <span class="badge badge-primary" style="display: inline-block; height:20px; padding-bottom:2px;margin-top:6px;">De Casteljau</span>&nbsp;&nbsp; 
              <label class="btn btn-sm btn-secondary">
                <input type="radio" value="0" name="deCast_view" id="deCast0" autocomplete="off" checked> hide
              </label>
              <label class="btn btn-sm btn-secondary active">
                <input type="radio" value="1" name="deCast_view" id="deCast1" autocomplete="off"> show
              </label>
            </div>
            <hr>
            <p><span class="badge badge-secondary">Težinske točke</span><br> <img src="slike/ratDeCast4.png" style="margin-top:10px;margin-left:50px;"></p>
            <p><img src="slike/ratDeCast5.png"></p>
            <hr>
            <p><img src="slike/ratDeCast6.png"></p>
            <p><img src="slike/ratDeCast7.png"></p>
          </div>
      </div>

      </div>
    </div>
        
      </div>

      <script language="JavaScript">
            var t_slider_elem = document.getElementById('t-slider-elem');
            var w0_slider_elem = document.getElementById('w0-slider-elem');
            var w1_slider_elem = document.getElementById('w1-slider-elem');
            var w2_slider_elem = document.getElementById('w2-slider-elem');
            var w3_slider_elem = document.getElementById('w3-slider-elem');
            var t_slider = 0.35;
            var w0 = 1.0;
            var w1 = 1.28;
            var w2 = 0.89;
            var w3 = 1.0;

            var w01 = (1 - t_slider) * w0 + t_slider * w1;
            var w11 = (1 - t_slider) * w1 + t_slider * w2;
            var w21 = (1 - t_slider) * w2 + t_slider * w3;

            var w02 = (1 - t_slider) * w01 + t_slider * w11;
            var w12 = (1 - t_slider) * w11 + t_slider * w21;

            var w03 = (1 - t_slider) * w02 + t_slider * w12;

            var nerac_show = 1;
            var deCast_show = 1;

            noUiSlider.create(t_slider_elem, {start: [0.35], connect: 'lower', tooltips:[true], step: 0.01, 
                                         range: {'min': 0, 'max': 1}});
            noUiSlider.create(w0_slider_elem, {start: [1.0], connect: 'lower', tooltips:[true], step: 0.01, 
                                         range: {'min': 0.01, 'max': 3}});
            noUiSlider.create(w1_slider_elem, {start: [1.28], connect: 'lower', tooltips:[true], step: 0.01, 
                                         range: {'min': 0.01, 'max': 3}});
            noUiSlider.create(w2_slider_elem, {start: [0.89], connect: 'lower', tooltips:[true], step: 0.01, 
                                         range: {'min': 0.01, 'max': 3}});
            noUiSlider.create(w3_slider_elem, {start: [1.0], connect: 'lower', tooltips:[true], step: 0.01, 
                                         range: {'min': 0.01, 'max': 3}});
            
            var control = [];
            
            var aplet = JXG.JSXGraph.initBoard('box', {boundingbox: [-2, 9, 11, -0.5], grid:true,  
                                                       showCopyright:false, keepaspectratio: false,
                                                       showNavigation:false,axis:true,
                                                       zoom:{wheel:false},
                                                       pan:{enabled:false}});
            
            aplet.highlightInfobox = function (x, y, el) {
                aplet.infobox.setText('');
            }; 

            var ime = aplet.create('text',[10.7,8.6,'<span style="background-color:white;">racionalni De Casteljau algoritam</span>'],{anchorX:'right',anchorY:'bottom',fontSize:14});

            control[0] = aplet.create('point', [1,2], {'name':'<span style="background-color:white; opacity:0.7;">b_0</span>', size:4, color:'#009900', label:{offset:[-5,-17]}});
            control[1] = aplet.create('point', [2,6], {'name':'<span style="background-color:white; opacity:0.7;">b_1</span>', size:4, color:'#009900', label:{offset:[-5,17]}});
            control[2] = aplet.create('point', [8,7], {'name':'<span style="background-color:white; opacity:0.7;">b_2</span>', size:4, color:'#009900', label:{offset:[-5,17]}}); 
            control[3] = aplet.create('point', [9,3], {'name':'<span style="background-color:white; opacity:0.7;">b_3</span>', size:4, color:'#009900', label:{offset:[-5,-17]}});

            var Q00 = aplet.create('point', [function(){return (w0 * control[0].X() + w1 * control[1].X()) / (w0 + w1);},
                                             function(){return (w0 * control[0].Y() + w1 * control[1].Y()) / (w0 + w1);}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">q_0^0</span>', face:'square', 
                                        color:'#ff9900', size:2, label:{offset:[-7,17]}, visible:function(){return (deCast_show == 1);}});
            var Q10 = aplet.create('point', [function(){return (w1 * control[1].X() + w2 * control[2].X()) / (w1 + w2);},
                                             function(){return (w1 * control[1].Y() + w2 * control[2].Y()) / (w1 + w2);}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">q_1^0</span>', face:'square', 
                                        color:'#ff9900', size:2, label:{offset:[-5,17]}, visible:function(){return (deCast_show == 1);}});
            var Q20 = aplet.create('point', [function(){return (w2 * control[2].X() + w3 * control[3].X()) / (w2 + w3);},
                                             function(){return (w2 * control[2].Y() + w3 * control[3].Y()) / (w2 + w3);}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">q_2^0</span>', face:'square', 
                                        color:'#ff9900', size:2, label:{offset:[5,-10]}, visible:function(){return (deCast_show == 1);}});

            var B01 = aplet.create('point', [function(){return (1 - t_slider) * (w0 / w01) * control[0].X() + t_slider * (w1 / w01) * control[1].X();},
                                             function(){return (1 - t_slider) * (w0 / w01) * control[0].Y() + t_slider * (w1 / w01) * control[1].Y();}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">b_0^1</span>', face:'square', 
                                        color:'#30c5dc', size:2, label:{offset:[-5,-17]}, visible:function(){return (deCast_show == 1);}});
            var B11 = aplet.create('point', [function(){return (1 - t_slider) * (w1 / w11) * control[1].X() + t_slider * (w2 / w11) * control[2].X();},
                                             function(){return (1 - t_slider) * (w1 / w11) * control[1].Y() + t_slider * (w2 / w11) * control[2].Y();}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">b_1^1</span>', face:'square', 
                                        color:'#30c5dc', size:2, label:{offset:[-5,-17]}, visible:function(){return (deCast_show == 1);}});
            var B21 = aplet.create('point', [function(){return (1 - t_slider) * (w2 / w21) * control[2].X() + t_slider * (w3 / w21) * control[3].X();},
                                             function(){return (1 - t_slider) * (w2 / w21) * control[2].Y() + t_slider * (w3 / w21) * control[3].Y();}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">b_2^1</span>', face:'square', 
                                        color:'#30c5dc', size:2, label:{offset:[-5,17]}, visible:function(){return (deCast_show == 1);}});

            var Q01 = aplet.create('point', [function(){return (w01 * B01.X() + w11 * B11.X()) / (w01 + w11);},
                                             function(){return (w01 * B01.Y() + w11 * B11.Y()) / (w01 + w11);}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">q_0^1</span>', face:'square', 
                                        color:'#00cc99', size:2, label:{offset:[-7,17]}, visible:function(){return (deCast_show == 1);}});
            var Q11 = aplet.create('point', [function(){return (w11 * B11.X() + w21 * B21.X()) / (w11 + w21);},
                                             function(){return (w11 * B11.Y() + w21 * B21.Y()) / (w11 + w21);}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">q_1^1</span>', face:'square', 
                                        color:'#00cc99', size:2, label:{offset:[-7,17]}, visible:function(){return (deCast_show == 1);}});

            var segment1 = aplet.create('segment', [control[0],control[1]], {strokeColor:'magenta',dash:1,strokeWidth:1});
            var segment2 = aplet.create('segment', [control[1],control[2]], {strokeColor:'magenta',dash:1,strokeWidth:1});
            var segment3 = aplet.create('segment', [control[2],control[3]], {strokeColor:'magenta',dash:1,strokeWidth:1});
            
            var segment4 = aplet.create('segment', [B01,B11], {strokeColor:'#0033ff',dash:1,strokeWidth:1, visible:function(){return (deCast_show == 1);}});
            var segment5 = aplet.create('segment', [B11,B21], {strokeColor:'#0033ff',dash:1,strokeWidth:1, visible:function(){return (deCast_show == 1);}});

            var B02 = aplet.create('point', [function(){return (1 - t_slider) * (w01 / w02) * B01.X() + t_slider * (w11 / w02) * B11.X();},
                                             function(){return (1 - t_slider) * (w01 / w02) * B01.Y() + t_slider * (w11 / w02) * B11.Y();}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">b_0^2</span>', face:'square', 
                                        color:'#6c8cff', size:2, label:{offset:[-5,-17]}, visible:function(){return (deCast_show == 1);}});
            var B12 = aplet.create('point', [function(){return (1 - t_slider) * (w11 / w12) * B11.X() + t_slider * (w21 / w12) * B21.X();},
                                             function(){return (1 - t_slider) * (w11 / w12) * B11.Y() + t_slider * (w21 / w12) * B21.Y();}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">b_1^2</span>', face:'square', 
                                        color:'#6c8cff', size:2, label:{offset:[-5,-17]}, visible:function(){return (deCast_show == 1);}});

            var segment6 = aplet.create('segment', [B02,B12], {strokeColor:'#25976f',dash:2,strokeWidth:1, visible:function(){return (deCast_show == 1);}});

            var B03 = aplet.create('point', [function(){return (1 - t_slider) * (w02 / w03) * B02.X() + t_slider * (w12 / w03) * B12.X();},
                                             function(){return (1 - t_slider) * (w02 / w03) * B02.Y() + t_slider * (w12 / w03) * B12.Y();}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">b_0^3</span>', color:'#ffff00', size:2, label:{offset:[-5,-17]}});
            var Q02 = aplet.create('point', [function(){return (w02 * B02.X() + w12 * B12.X()) / (w02 + w12);},
                                             function(){return (w02 * B02.Y() + w12 * B12.Y()) / (w02 + w12);}],
                                        {'name':'<span style="background-color:white; opacity:0.7;">q_0^2</span>', face:'square', 
                                        color:'#000000', size:2, label:{offset:[-7,17]}, visible:function(){return (deCast_show == 1);}});

            ime.setAttribute({fixed:true});
            segment1.setAttribute({fixed:true,highlight:false});
            segment2.setAttribute({fixed:true,highlight:false});
            segment3.setAttribute({fixed:true,highlight:false});
            segment4.setAttribute({fixed:true,highlight:false});
            segment5.setAttribute({fixed:true,highlight:false});
            segment6.setAttribute({fixed:true,highlight:false});
            B01.setAttribute({highlight:false});
            B11.setAttribute({highlight:false});
            B21.setAttribute({highlight:false});
            B02.setAttribute({highlight:false});
            B12.setAttribute({highlight:false});
            B03.setAttribute({strokeColor: 'black'});
            Q00.setAttribute({highlight:false});
            Q10.setAttribute({highlight:false});
            Q20.setAttribute({highlight:false});
            Q01.setAttribute({highlight:false});
            Q11.setAttribute({highlight:false});
            Q02.setAttribute({highlight:false});

            var neracionalna = aplet.create('curve', JXG.Math.Numerics.bezier(control), 
                               {dash:2,strokeWidth:2,strokeColor:'blue',opacity:0.5,visible:function(){return (nerac_show == 1);}});

            var krivulja = aplet.create('curve',
                       [function(t){ return (w0*(1-t)**3*control[0].X() + w1*3*t*(1-t)**2*control[1].X() + w2*3*t**2*(1-t)*control[2].X() + w3*t**3*control[3].X()) / (w0*(1-t)**3 + w1*3*t*(1-t)**2 + w2*3*t**2*(1-t) + w3*t**3);},
                        function(t){ return (w0*(1-t)**3*control[0].Y() + w1*3*t*(1-t)**2*control[1].Y() + w2*3*t**2*(1-t)*control[2].Y() + w3*t**3*control[3].Y()) / (w0*(1-t)**3 + w1*3*t*(1-t)**2 + w2*3*t**2*(1-t) + w3*t**3);},
                        0, 1],{strokeWidth:3,strokeColor:'red'});
            
            $("#menu-toggle").click(function(event) {
              event.preventDefault();
              $("#wrapper").toggleClass("toggled");
            });

            t_slider_elem.noUiSlider.on('update', function() {
              t_slider = Number(t_slider_elem.noUiSlider.get());
              w01 = (1 - t_slider) * w0 + t_slider * w1;
              w11 = (1 - t_slider) * w1 + t_slider * w2;
              w21 = (1 - t_slider) * w2 + t_slider * w3;
              w02 = (1 - t_slider) * w01 + t_slider * w11;
              w12 = (1 - t_slider) * w11 + t_slider * w21;
              w03 = (1 - t_slider) * w02 + t_slider * w12;
              aplet.update();
            });

            w0_slider_elem.noUiSlider.on('update', function() {
              w0 = Number(w0_slider_elem.noUiSlider.get());
              w01 = (1 - t_slider) * w0 + t_slider * w1;
              w02 = (1 - t_slider) * w01 + t_slider * w11;
              w03 = (1 - t_slider) * w02 + t_slider * w12;
              aplet.update();
            });

            w1_slider_elem.noUiSlider.on('update', function() {
              w1 = Number(w1_slider_elem.noUiSlider.get());
              w01 = (1 - t_slider) * w0 + t_slider * w1;
              w11 = (1 - t_slider) * w1 + t_slider * w2;
              w02 = (1 - t_slider) * w01 + t_slider * w11;
              w12 = (1 - t_slider) * w11 + t_slider * w21;
              w03 = (1 - t_slider) * w02 + t_slider * w12;
              aplet.update();
            });

            w2_slider_elem.noUiSlider.on('update', function() {
              w2 = Number(w2_slider_elem.noUiSlider.get());
              w11 = (1 - t_slider) * w1 + t_slider * w2;
              w21 = (1 - t_slider) * w2 + t_slider * w3;
              w02 = (1 - t_slider) * w01 + t_slider * w11;
              w12 = (1 - t_slider) * w11 + t_slider * w21;
              w03 = (1 - t_slider) * w02 + t_slider * w12;
              aplet.update();
            });

            w3_slider_elem.noUiSlider.on('update', function() {
              w3 = Number(w3_slider_elem.noUiSlider.get());
              w21 = (1 - t_slider) * w2 + t_slider * w3;
              w12 = (1 - t_slider) * w11 + t_slider * w21;
              w03 = (1 - t_slider) * w02 + t_slider * w12;
              aplet.update();
            });

            $('#refresh').on('click', function(event) {
              event.preventDefault();
              control[0].moveTo([1,2]);
              control[1].moveTo([2,6]);
              control[2].moveTo([8,7]);
              control[3].moveTo([9,3]);
              t_slider = 0.35;
              w0 = 1.0;
              w1 = 1.28;
              w2 = 0.89;
              w3 = 1.0;
              t_slider_elem.noUiSlider.set(0.35);
              w0_slider_elem.noUiSlider.set(1.0);
              w1_slider_elem.noUiSlider.set(1.28);
              w2_slider_elem.noUiSlider.set(0.89);
              w3_slider_elem.noUiSlider.set(1.0);
              if (nerac_show != 1) {
                nerac_show = 1;
                $("#nerac1").prop("checked", true).trigger("click");
              }
              if (deCast_show != 1) {
                deCast_show = 1;
                $("#deCast1").prop("checked", true).trigger("click");
              }
              aplet.update();
            });

            $('input[name=nerac_view]').on('change', function() {
              nerac_show = parseInt($(this).val());
              aplet.update();
            });

            $('input[name=deCast_view]').on('change', function() {
              deCast_show = parseInt($(this).val());
              aplet.update();
            });
        </script>

    </body>

</html>